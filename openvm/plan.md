# hash-sig 移行計画

## 背景

- 既存の独自 XMSS 実装は削除済みで、hash-sig クレートを採用する方針に決定した。
- ワークスペースのツールチェーンを Rust 1.87.0 へ引き上げ、依存条件も更新済み。
- 今後は hash-sig を利用したラッパー／CLI／ゲストの再構築と、テスト・ドキュメントの整備が必要。

## 実行ステップ

1. **ラッパーレイヤーの設計と実装**
   - `hash-sig` の API を把握し、`xmss-lib` に新しいラッパー／ユーティリティを追加する。
   - 公開インターフェイスを再定義し、`xmss-types` と整合する型・パラメータを揃える。
   - ゲストが利用できるよう `no_std` 制約やシリアライゼーション仕様を考慮する。
2. **ホスト／ゲストの更新**
   - ホスト CLI のキー生成・署名・検証フローを新ラッパーへ置き換える。
   - ゲスト内の検証ロジックを hash-sig ベースで再実装し、入力形式・公開出力の互換性を確保する。
   - 必要に応じてベンチマーク機能を復活させ、新しいパラメータで計測できるよう調整する。
3. **テストと検証**
   - ラッパーの単体テストおよびホスト／ゲスト間の統合テストを整備する。
   - OpenVM ワークフローで `cargo test`、`cargo openvm`（ゲストビルド）を実行し、回帰を確認する。
   - 必要ならゴールデンベクトルの再生成や比較手順を文書化する。
4. **ドキュメント整備**
   - README や CLI ヘルプに hash-sig 利用手順、依存バージョン、ベンチ再現方法を追記する。
   - 変更点や注意事項を開発者向けドキュメントにまとめ、移行後の運用手順を明確にする。

## 成果物と確認ポイント

- `xmss-lib`, `xmss-host`, ゲストコードが hash-sig ベースで再び動作し、CI も Rust 1.87.0 で通る。
- テストスイートとベンチマークが新実装に対応し、主要ユースケースで回帰がないこと。
- ドキュメントに手順・要件・ベンチ結果の更新が反映されていること。
